{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst STORAGE_KEY = \"feedback-form-state\";\nconst form = document.querySelector('.feedback-form');\nconst { email, message } = form.elements;\n\nform.addEventListener('input', throttle(handleInput, 500));\nform.addEventListener('submit', handleSubmit);\n\nlet formData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\nreloadPage();\n\nfunction reloadPage() {\n    email.value = formData.email || '';\n    message.value = formData.message || '';\n};\n\nfunction handleInput() {\n    formData = { email: email.value, message: message.value};\n    saveToLocalStorage();\n};\n\nfunction handleSubmit(evt) {\n    evt.preventDefault();\n  \n    if (email.value === '' || message.value === '') {\n      return alert('Please fill in all required fields.');\n    }\n  \n    console.log({ email: email.value, message: message.value });\n    clearLocalStorage();\n    evt.currentTarget.reset();\n    formData = {};\n  }\n\nfunction saveToLocalStorage() {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n  };\n\n  function clearLocalStorage() {\n    localStorage.removeItem(STORAGE_KEY);\n  };\n"],"names":["STORAGE_KEY","form","email","message","throttle","handleInput","handleSubmit","formData","reloadPage","saveToLocalStorage","evt","clearLocalStorage"],"mappings":"wIAEA,MAAMA,EAAc,sBACdC,EAAO,SAAS,cAAc,gBAAgB,EAC9C,CAAE,MAAAC,EAAO,QAAAC,GAAYF,EAAK,SAEhCA,EAAK,iBAAiB,QAASG,EAASC,EAAa,GAAG,CAAC,EACzDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,IAAIC,EAAW,KAAK,MAAM,aAAa,QAAQP,CAAW,CAAC,GAAK,GAChEQ,IAEA,SAASA,GAAa,CAClBN,EAAM,MAAQK,EAAS,OAAS,GAChCJ,EAAQ,MAAQI,EAAS,SAAW,EACxC,CAEA,SAASF,GAAc,CACnBE,EAAW,CAAE,MAAOL,EAAM,MAAO,QAASC,EAAQ,KAAK,EACvDM,GACJ,CAEA,SAASH,EAAaI,EAAK,CAGvB,GAFAA,EAAI,eAAc,EAEdR,EAAM,QAAU,IAAMC,EAAQ,QAAU,GAC1C,OAAO,MAAM,qCAAqC,EAGpD,QAAQ,IAAI,CAAE,MAAOD,EAAM,MAAO,QAASC,EAAQ,KAAK,CAAE,EAC1DQ,IACAD,EAAI,cAAc,QAClBH,EAAW,CAAA,CACZ,CAEH,SAASE,GAAqB,CAC1B,aAAa,QAAQT,EAAa,KAAK,UAAUO,CAAQ,CAAC,CAE9D,CACE,SAASI,GAAoB,CAC3B,aAAa,WAAWX,CAAW,CACvC"}